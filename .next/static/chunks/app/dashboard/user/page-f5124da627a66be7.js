(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[679],{2238:function(e,t,r){Promise.resolve().then(r.bind(r,3685))},3685:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var s=r(7437),n=r(2265),a=r(7648),i=r(8997),l=r(525),d=r(1047),c=r(2208),o=r(6070),u=r(2869),x=r(5974),h=r(247),m=r(4455);function v(){var e,t,r,v,f;let[g,p]=(0,n.useState)(1),{data:b,isLoading:j}=(0,h.Mx)(""),{data:y,isLoading:N}=(0,m.ct)({page:g.toString(),limit:"10"});if(j)return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})});let w=null==b?void 0:b.user;return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",null==w?void 0:w.name,"!"]}),(0,s.jsx)("p",{className:"text-gray-600",children:"Track your donations and see the impact you're making"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ll,{className:"text-sm font-medium",children:"Total Donated"}),(0,s.jsx)(i.Z,{className:"h-4 w-4 text-red-500"})]}),(0,s.jsxs)(o.aY,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",(null==w?void 0:null===(e=w.totalDonated)||void 0===e?void 0:e.toLocaleString())||0]}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Lifetime contributions"})]})]}),(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ll,{className:"text-sm font-medium",children:"Donations Made"}),(0,s.jsx)(l.Z,{className:"h-4 w-4 text-blue-500"})]}),(0,s.jsxs)(o.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:(null==w?void 0:null===(t=w.donationHistory)||void 0===t?void 0:t.length)||0}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Total donations"})]})]}),(0,s.jsxs)(o.Zb,{children:[(0,s.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(o.ll,{className:"text-sm font-medium",children:"This Month"}),(0,s.jsx)(d.Z,{className:"h-4 w-4 text-purple-500"})]}),(0,s.jsxs)(o.aY,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:["$",(null==y?void 0:null===(v=y.donations)||void 0===v?void 0:null===(r=v.filter(e=>{let t=new Date(e.createdAt),r=new Date;return t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()}).reduce((e,t)=>e+t.amount,0))||void 0===r?void 0:r.toLocaleString())||0]}),(0,s.jsx)("p",{className:"text-xs text-gray-600",children:"Current month donations"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)(o.Zb,{children:[(0,s.jsx)(o.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(o.ll,{children:"Recent Donations"}),(0,s.jsx)(a.default,{href:"/dashboard/user/donations",children:(0,s.jsx)(u.z,{variant:"outline",size:"sm",children:"View All"})})]})}),(0,s.jsx)(o.aY,{children:N?(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,s.jsx)("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]},t))}):(null==y?void 0:null===(f=y.donations)||void 0===f?void 0:f.length)>0?(0,s.jsx)("div",{className:"space-y-4",children:y.donations.slice(0,5).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("img",{src:e.charity.logo||"/placeholder.svg?height=40&width=40&query=charity logo",alt:e.charity.name,className:"w-10 h-10 rounded-full object-cover"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:e.charity.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.createdAt).toLocaleDateString()})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-semibold text-green-600",children:["$",e.amount.toLocaleString()]}),(0,s.jsx)(x.C,{variant:"completed"===e.paymentStatus?"default":"secondary",className:"text-xs",children:e.paymentStatus})]})]},e.id))}):(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(i.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"No donations yet"}),(0,s.jsx)(a.default,{href:"/charities",children:(0,s.jsx)(u.z,{children:"Start Donating"})})]})})]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(o.Zb,{children:[(0,s.jsx)(o.Ol,{children:(0,s.jsx)(o.ll,{children:"Quick Actions"})}),(0,s.jsxs)(o.aY,{className:"space-y-4",children:[(0,s.jsx)(a.default,{href:"/charities",children:(0,s.jsxs)(u.z,{className:"w-full",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"Browse Charities"]})}),(0,s.jsx)(a.default,{href:"/dashboard/user/profile",children:(0,s.jsx)(u.z,{variant:"outline",className:"w-full",children:"Edit Profile"})}),(0,s.jsx)(a.default,{href:"/impact-reports",children:(0,s.jsxs)(u.z,{variant:"outline",className:"w-full",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"View Impact Reports"]})})]})]}),(0,s.jsxs)(o.Zb,{children:[(0,s.jsx)(o.Ol,{children:(0,s.jsx)(o.ll,{children:"Profile Summary"})}),(0,s.jsx)(o.aY,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Email"}),(0,s.jsx)("p",{className:"font-medium",children:null==w?void 0:w.email})]}),(null==w?void 0:w.phone)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Phone"}),(0,s.jsx)("p",{className:"font-medium",children:w.phone})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Member since"}),(0,s.jsx)("p",{className:"font-medium",children:(null==w?void 0:w.createdAt)?new Date(w.createdAt).toLocaleDateString():"N/A"})]})]})})]})]})]})]})})}},5974:function(e,t,r){"use strict";r.d(t,{C:function(){return d}});var s=r(7437);r(2265);var n=r(7053),a=r(535),i=r(4508);let l=(0,a.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function d(e){let{className:t,variant:r,asChild:a=!1,...d}=e,c=a?n.g7:"span";return(0,s.jsx)(c,{"data-slot":"badge",className:(0,i.cn)(l({variant:r}),t),...d})}},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var s=r(7437);r(2265);var n=r(7053),a=r(535),i=r(4508);let l=(0,a.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:r,size:a,asChild:d=!1,...c}=e,o=d?n.g7:"button";return(0,s.jsx)(o,{"data-slot":"button",className:(0,i.cn)(l({variant:r,size:a,className:t})),...c})}},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},Zb:function(){return a},aY:function(){return d},eW:function(){return c},ll:function(){return l}});var s=r(7437);r(2265);var n=r(4508);function a(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function i(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,n.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function l(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,n.cn)("leading-none font-semibold",t),...r})}function d(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,n.cn)("px-6",t),...r})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"card-footer",className:(0,n.cn)("flex items-center px-6 [.border-t]:pt-6",t),...r})}},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(1994),n=r(3335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},2208:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8997:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},525:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},4455:function(e,t,r){"use strict";r.d(t,{$I:function(){return l},BI:function(){return i},JM:function(){return d},ct:function(){return c}});var s=r(9523),n=r(3557);let a=(0,s.ni)({baseUrl:"/api/donations",prepareHeaders:(e,t)=>{let{getState:r}=t,s=r().auth.token;return s&&e.set("authorization","Bearer ".concat(s)),e}}),i=(0,n.LC)({reducerPath:"donationsApi",baseQuery:a,tagTypes:["Donation"],endpoints:e=>({createDonation:e.mutation({query:e=>({url:"",method:"POST",body:e}),invalidatesTags:["Donation"]}),confirmDonation:e.mutation({query:e=>({url:"/confirm",method:"POST",body:{paymentIntentId:e}}),invalidatesTags:["Donation"]}),getDonations:e.query({query:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return"?".concat(t)},providesTags:["Donation"]}),getReceipt:e.query({query:e=>"/".concat(e,"/receipt")})})}),{useCreateDonationMutation:l,useConfirmDonationMutation:d,useGetDonationsQuery:c,useGetReceiptQuery:o}=i},247:function(e,t,r){"use strict";r.d(t,{Mx:function(){return l},TG:function(){return d},g8:function(){return i}});var s=r(9523),n=r(3557);let a=(0,s.ni)({baseUrl:"/api/users",prepareHeaders:(e,t)=>{let{getState:r}=t,s=r().auth.token;return s&&e.set("authorization","Bearer ".concat(s)),e}}),i=(0,n.LC)({reducerPath:"usersApi",baseQuery:a,tagTypes:["User"],endpoints:e=>({getProfile:e.query({query:()=>"/profile",providesTags:["User"]}),updateProfile:e.mutation({query:e=>({url:"/profile",method:"PUT",body:e}),invalidatesTags:["User"]})})}),{useGetProfileQuery:l,useUpdateProfileMutation:d}=i}},function(e){e.O(0,[203,557,648,971,117,744],function(){return e(e.s=2238)}),_N_E=e.O()}]);