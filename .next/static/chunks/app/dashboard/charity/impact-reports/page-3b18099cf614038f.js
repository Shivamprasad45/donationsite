(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[889],{3253:function(e,t,r){Promise.resolve().then(r.bind(r,2582))},2582:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var a=r(7437),s=r(7648),i=r(2660),n=r(9397),d=r(5252),c=r(1047),o=r(5805),l=r(2208),u=r(5868),h=r(6070),m=r(2869),p=r(5974),x=r(386),g=r(778),v=r(5098);function f(){var e;let t=(0,x.I0)(),{user:r}=(0,x.v9)(e=>e.auth),f=null==r?void 0:r.charityId,{data:b,isLoading:y,error:j}=(0,g.ic)({charityId:f,limit:"20"}),[N]=(0,g.jl)(),w=async e=>{try{await N(e).unwrap(),t((0,v.fz)({type:"success",title:"Report Published",message:"Your impact report has been published and donors have been notified"}))}catch(e){var r;t((0,v.fz)({type:"error",title:"Publish Failed",message:(null===(r=e.data)||void 0===r?void 0:r.error)||"Failed to publish report"}))}};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)(s.default,{href:"/dashboard/charity",children:(0,a.jsxs)(m.z,{variant:"ghost",className:"mb-4",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Impact Reports"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Create and manage your impact reports to show donors how their contributions are making a difference"})]}),(0,a.jsx)(s.default,{href:"/dashboard/charity/impact-reports/create",children:(0,a.jsxs)(m.z,{children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 mr-2"}),"Create Report"]})})]})]}),(0,a.jsx)("div",{className:"space-y-6",children:y?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)(h.Zb,{className:"animate-pulse",children:[(0,a.jsxs)(h.Ol,{children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]}),(0,a.jsxs)(h.aY,{children:[(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},t))}):j?(0,a.jsx)(h.Zb,{children:(0,a.jsx)(h.aY,{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Failed to load impact reports. Please try again."})})}):(null==b?void 0:null===(e=b.reports)||void 0===e?void 0:e.length)===0?(0,a.jsx)(h.Zb,{children:(0,a.jsxs)(h.aY,{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(d.Z,{className:"h-8 w-8 text-blue-600"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No Impact Reports Yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Create your first impact report to show donors how their contributions are making a difference."}),(0,a.jsx)(s.default,{href:"/dashboard/charity/impact-reports/create",children:(0,a.jsxs)(m.z,{children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 mr-2"}),"Create Your First Report"]})})]})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:b.reports.map(e=>(0,a.jsxs)(h.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,a.jsx)(h.Ol,{children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.ll,{className:"text-lg line-clamp-2 mb-2",children:e.title}),(0,a.jsx)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-1"}),(0,a.jsxs)("span",{children:[new Date(e.reportPeriod.startDate).toLocaleDateString()," - "," ",new Date(e.reportPeriod.endDate).toLocaleDateString()]})]})})]}),(0,a.jsx)(p.C,{variant:e.isPublished?"default":"secondary",children:e.isPublished?"Published":"Draft"})]})}),(0,a.jsxs)(h.aY,{children:[(0,a.jsx)("p",{className:"text-gray-700 text-sm line-clamp-3 mb-4",children:e.description}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 text-blue-600 mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs font-medium text-blue-900",children:"Funds Received"}),(0,a.jsxs)("p",{className:"text-sm font-bold text-blue-600",children:["$",e.totalFundsReceived.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 text-green-600 mx-auto mb-1"}),(0,a.jsx)("p",{className:"text-xs font-medium text-green-900",children:"Beneficiaries"}),(0,a.jsx)("p",{className:"text-sm font-bold text-green-600",children:e.beneficiariesReached.toLocaleString()})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(s.default,{href:"/dashboard/charity/impact-reports/".concat(e.id),className:"flex-1",children:(0,a.jsxs)(m.z,{variant:"outline",size:"sm",className:"w-full",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"View"]})}),!e.isPublished&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.default,{href:"/dashboard/charity/impact-reports/".concat(e.id,"/edit"),children:(0,a.jsxs)(m.z,{variant:"outline",size:"sm",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Edit"]})}),(0,a.jsx)(m.z,{size:"sm",onClick:()=>w(e.id),children:"Publish"})]})]}),e.isPublished&&e.publishedAt&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Published on ",new Date(e.publishedAt).toLocaleDateString()]})]})]},e.id))})})]})})}},5974:function(e,t,r){"use strict";r.d(t,{C:function(){return c}});var a=r(7437);r(2265);var s=r(7053),i=r(535),n=r(4508);let d=(0,i.j)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:r,asChild:i=!1,...c}=e,o=i?s.g7:"span";return(0,a.jsx)(o,{"data-slot":"badge",className:(0,n.cn)(d({variant:r}),t),...c})}},2869:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var a=r(7437);r(2265);var s=r(7053),i=r(535),n=r(4508);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function c(e){let{className:t,variant:r,size:i,asChild:c=!1,...o}=e,l=c?s.g7:"button";return(0,a.jsx)(l,{"data-slot":"button",className:(0,n.cn)(d({variant:r,size:i,className:t})),...o})}},6070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return n},Zb:function(){return i},aY:function(){return c},eW:function(){return o},ll:function(){return d}});var a=r(7437);r(2265);var s=r(4508);function i(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function n(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function d(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...r})}function c(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...r})}function o(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",t),...r})}},4508:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var a=r(1994),s=r(3335);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},2660:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},5252:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},2208:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5868:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},5805:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},778:function(e,t,r){"use strict";r.d(t,{G0:function(){return n},hp:function(){return d},ic:function(){return l},jl:function(){return h},xG:function(){return c}});var a=r(9523),s=r(3557);let i=(0,a.ni)({baseUrl:"/api/charities",prepareHeaders:(e,t)=>{let{getState:r}=t,a=r().auth.token;return a&&e.set("authorization","Bearer ".concat(a)),e}}),n=(0,s.LC)({reducerPath:"charitiesApi",baseQuery:i,tagTypes:["Charity","ImpactReport"],endpoints:e=>({getCharities:e.query({query:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return"?".concat(t)},providesTags:["Charity"]}),getCharityById:e.query({query:e=>"/".concat(e),providesTags:(e,t,r)=>[{type:"Charity",id:r}]}),updateCharity:e.mutation({query:e=>{let{id:t,...r}=e;return{url:"/".concat(t),method:"PUT",body:r}},invalidatesTags:(e,t,r)=>{let{id:a}=r;return[{type:"Charity",id:a}]}}),getImpactReports:e.query({query:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams(e).toString();return"/impact-reports?".concat(t)},providesTags:["ImpactReport"]}),createImpactReport:e.mutation({query:e=>({url:"/impact-reports",method:"POST",body:e}),invalidatesTags:["ImpactReport"]}),publishImpactReport:e.mutation({query:e=>({url:"/impact-reports/".concat(e,"/publish"),method:"POST"}),invalidatesTags:["ImpactReport"]})})}),{useGetCharitiesQuery:d,useGetCharityByIdQuery:c,useUpdateCharityMutation:o,useGetImpactReportsQuery:l,useCreateImpactReportMutation:u,usePublishImpactReportMutation:h}=n},5098:function(e,t,r){"use strict";r.d(t,{RS:function(){return i},fz:function(){return s}});let a=(0,r(9129).oM)({name:"ui",initialState:{toasts:[],sidebarOpen:!1,loading:!1},reducers:{addToast:(e,t)=>{let r={...t.payload,id:Date.now().toString()};e.toasts.push(r)},removeToast:(e,t)=>{e.toasts=e.toasts.filter(e=>e.id!==t.payload)},toggleSidebar:e=>{e.sidebarOpen=!e.sidebarOpen},setLoading:(e,t)=>{e.loading=t.payload}}}),{addToast:s,removeToast:i,toggleSidebar:n,setLoading:d}=a.actions;t.ZP=a.reducer}},function(e){e.O(0,[203,557,648,971,117,744],function(){return e(e.s=3253)}),_N_E=e.O()}]);